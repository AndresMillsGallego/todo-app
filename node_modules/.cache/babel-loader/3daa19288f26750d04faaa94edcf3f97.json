{"ast":null,"code":"/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __extends } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { AbstractPureComponent2, Classes, Keys, Utils } from \"../../common\";\nimport { Icon, IconSize } from \"../icon/icon\";\nimport { Spinner } from \"../spinner/spinner\";\n\nvar AbstractButton =\n/** @class */\nfunction (_super) {\n  __extends(AbstractButton, _super);\n\n  function AbstractButton() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isActive: false\n    }; // we're casting as `any` to get around a somewhat opaque safeInvoke error\n    // that \"Type argument candidate 'KeyboardEvent<T>' is not a valid type\n    // argument because it is not a supertype of candidate\n    // 'KeyboardEvent<HTMLElement>'.\"\n\n    _this.handleKeyDown = function (e) {\n      var _a, _b; // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n\n      /* eslint-disable deprecation/deprecation */\n\n\n      if (Keys.isKeyboardClick(e.which)) {\n        e.preventDefault();\n\n        if (e.which !== _this.currentKeyDown) {\n          _this.setState({\n            isActive: true\n          });\n        }\n      }\n\n      _this.currentKeyDown = e.which;\n      (_b = (_a = _this.props).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n    };\n\n    _this.handleKeyUp = function (e) {\n      var _a, _b, _c; // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n\n      /* eslint-disable deprecation/deprecation */\n\n\n      if (Keys.isKeyboardClick(e.which)) {\n        _this.setState({\n          isActive: false\n        });\n\n        (_a = _this.buttonRef) === null || _a === void 0 ? void 0 : _a.click();\n      }\n\n      _this.currentKeyDown = undefined;\n      (_c = (_b = _this.props).onKeyUp) === null || _c === void 0 ? void 0 : _c.call(_b, e);\n    };\n\n    _this.handleBlur = function (e) {\n      var _a, _b;\n\n      if (_this.state.isActive) {\n        _this.setState({\n          isActive: false\n        });\n      }\n\n      (_b = (_a = _this.props).onBlur) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n    };\n\n    return _this;\n  }\n\n  AbstractButton.prototype.getCommonButtonProps = function () {\n    var _a;\n\n    var _b = this.props,\n        active = _b.active,\n        alignText = _b.alignText,\n        fill = _b.fill,\n        large = _b.large,\n        loading = _b.loading,\n        outlined = _b.outlined,\n        minimal = _b.minimal,\n        small = _b.small,\n        tabIndex = _b.tabIndex;\n    var disabled = this.props.disabled || loading;\n    var className = classNames(Classes.BUTTON, (_a = {}, _a[Classes.ACTIVE] = !disabled && (active || this.state.isActive), _a[Classes.DISABLED] = disabled, _a[Classes.FILL] = fill, _a[Classes.LARGE] = large, _a[Classes.LOADING] = loading, _a[Classes.MINIMAL] = minimal, _a[Classes.OUTLINED] = outlined, _a[Classes.SMALL] = small, _a), Classes.alignmentClass(alignText), Classes.intentClass(this.props.intent), this.props.className);\n    return {\n      className: className,\n      disabled: disabled,\n      onBlur: this.handleBlur,\n      onClick: disabled ? undefined : this.props.onClick,\n      onKeyDown: this.handleKeyDown,\n      onKeyUp: this.handleKeyUp,\n      tabIndex: disabled ? -1 : tabIndex\n    };\n  };\n\n  AbstractButton.prototype.renderChildren = function () {\n    var _a = this.props,\n        children = _a.children,\n        icon = _a.icon,\n        loading = _a.loading,\n        rightIcon = _a.rightIcon,\n        text = _a.text;\n    var maybeHasText = !Utils.isReactNodeEmpty(text) || !Utils.isReactNodeEmpty(children);\n    return [loading && React.createElement(Spinner, {\n      key: \"loading\",\n      className: Classes.BUTTON_SPINNER,\n      size: IconSize.LARGE\n    }), // The icon is purely decorative if text is provided\n    React.createElement(Icon, {\n      key: \"leftIcon\",\n      icon: icon,\n      \"aria-hidden\": maybeHasText,\n      tabIndex: maybeHasText ? -1 : undefined\n    }), maybeHasText && React.createElement(\"span\", {\n      key: \"text\",\n      className: Classes.BUTTON_TEXT\n    }, text, children), React.createElement(Icon, {\n      key: \"rightIcon\",\n      icon: rightIcon\n    })];\n  };\n\n  return AbstractButton;\n}(AbstractPureComponent2);\n\nexport { AbstractButton };","map":{"version":3,"mappings":"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","names":["classNames","React","AbstractPureComponent2","Classes","Keys","Utils","Icon","IconSize","Spinner","__extends","_this","isActive","e","isKeyboardClick","which","preventDefault","currentKeyDown","setState","props","onKeyDown","_b","buttonRef","_a","click","undefined","onKeyUp","_c","state","onBlur","AbstractButton","active","alignText","fill","large","loading","outlined","minimal","small","tabIndex","disabled","className","BUTTON","ACTIVE","DISABLED","FILL","LARGE","LOADING","MINIMAL","OUTLINED","SMALL","alignmentClass","intentClass","intent","handleBlur","onClick","handleKeyDown","handleKeyUp","children","icon","rightIcon","text","maybeHasText","isReactNodeEmpty","key","BUTTON_SPINNER","size","BUTTON_TEXT"],"sourceRoot":"","sources":["../../../../src/components/button/abstractButton.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}